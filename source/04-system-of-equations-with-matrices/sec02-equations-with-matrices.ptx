<section xml:id="sec-equations-with-Matrices" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Systems of Equations with Matrices</title>
    <p>
        As an introduction to solving equations in Sage, we worked with equations symbolically. Now, we will learn how to solve systems of equations with vectors and matrices.
    </p>
    <p>
        Let's solve the following system of equations:
    </p>
    <md>
        <mrow>
            \begin{array}{c}
            7x + y - 3z  = 7\\
            3x + 0y - 9z  = 15\\
            -x + 0y + 3z = -5
            \end{array}
        </mrow>
    </md>
    <p>
        In Sage, we can create an coefficient matrix using the <c>matrix</c> function.
    </p>
    <sage>
        <input>
            M = matrix([
                    [7, 1, -3],
                    [3, 0, -9],
                    [-1, 0, 3]
                ])
            print(M)
        </input>
        <output>

        </output>
    </sage>
    <p>
        Next, provide a list of constants to the <c>vector</c> function.
    </p>
    <sage>
        <input>
            v = vector([7, 15, -5])
            print(v)
        </input>
        <output>

        </output>
    </sage>
    <p>
        Finally, call the <c>solve_right</c> method on the matrix and pass the solution vector as its argument.
    </p>
    <sage>
        <input>
            M.solve_right(v)
        </input>
        <output>

        </output>
    </sage>
    <p>
        The output <c>(5, -28, 0)</c> expresses one solution to the system:
    </p>
    <md>
    <mrow>
        \begin{array}{c}
        x = 5 \\
        y = -28 \\
        z = 0 
        \end{array}
    </mrow>
    </md>
    <section xml:id="sec-differences-in-solutions">
        <title>Differences in Solutions</title>
    <p>
        To find all solutions we first need to augment matrix <m>M</m> with vector <m>v</m>. This is done with the <c>augment</c> method.
    </p>
    <sage>
        <input>
            # subdivide=True adds a dividing line to the new matrix
            Mv = M.augment(v, subdivide=True)
            Mv
        </input>
        <output>
            
        </output>
    </sage>
    <p>
        To solve this new matrix, call the <c>rref</c> method to output the matrix in reduced row echelon form.
    </p>
    <sage>
        <input>
            Mv.rref()
        </input>
        <output>
            
        </output>
    </sage>
    <p>
        The row of zeros at the bottom indicates that the system has infinitely many solutions.
    </p>
    <p>
        These methods also differ in how they handle a system with no solutions. 
        For example if we instead solve for a vector <m>u = (1,2,8)</m> with the <c>solve_right</c> method, an error will be thrown.
    </p>
    <sage>
        <input>
            u = vector([1 ,2 ,8])
            try:
                M.solve_right(u)
            except Exception as e:
                print(e)
        </input>
        <output>
            
        </output>
    </sage>
    <p>
        Where as the <c>rref</c> method will return a matrix which represents an inconsistent system.
    </p>
    <sage>
        <input>
            M.augment(u, subdivide=True).rref()
        </input>
        <output>
            
        </output>
    </sage>
    <p>
        The two methods differ very little when there is only one solution.
        The <c>solve_right</c> method is efficient when the system has a unique solution.
    </p>
    <sage>
        <input>
            A = matrix([
                [0, 1, -1],
                [1, 2, 0],
                [1, 0, 1]
            ])
            b = vector([0, 4, 4])
            A.solve_right(b)
        </input>
        <output>
            
        </output>
    </sage>
    <sage>
        <input>
            Ab = A.augment(b)
            Ab.rref()
        </input>
        <output>
            
        </output>
    </sage>
    </section>
</section>
